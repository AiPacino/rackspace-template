# Configuration for "util" host type

##############################################
# Class definitions.
classes:
  #- apache
  - site_profile::jenkins
  #- site_profile::puppetmaster
  - munin
  #- munin::server

##############################################
# Firewall configuration.
site_profile::puppetmaster::firewall_rules:
  '110 allow puppet agent from prod-db1':
    port: 8140
    source: prod-db1.cashmusic.org
  '110 allow puppet agent from prod-web1':
    port: 8140
    source: prod-web1.cashmusic.org
  '110 allow puppet agent from prod-web2':
    port: 8140
    source: prod-web2.cashmusic.org
  '110 allow puppet agent from prod-web5':
    port: 8140
    source: prod-web5.cashmusic.org
  '110 allow puppet agent from prod-web6':
    port: 8140
    source: prod-web6.cashmusic.org
  '110 allow puppet agent from prod-web7':
    port: 8140
    source: prod-web7.cashmusic.org
  '110 allow puppet agent from prod-web8':
    port: 8140
    source: prod-web8.cashmusic.org
  '110 allow puppet agent from dev-multi1':
    port: 8140
    source: dev-multi1.cashmusic.org
  '110 allow puppet agent from stage-multi1':
    port: 8140
    source: stage-multi1.cashmusic.org

site_profile::jenkins::firewall_rules:
  '140 allow github hooks':
    port: 8080
    source: 192.30.252.0/22

##############################################
# Jenkins configuration.
site_profile::jenkins::configure_firewall: false

##############################################
# User configuration.
# Add access for Devs to Util / Jenkins.
user_accounts:
  christopherleckie:
    uid: 3510
    ssh_key_type: ssh-rsa
    groups:
      - users
      - db-snapshots
    ssh_key: AAAAB3NzaC1yc2EAAAADAQABAAABAQCnqkM41oV4/mkC56Apr9elNMlKxy3aHi/rP1RCPfhrAE3p0vHqjgrZ6CZ0F/ThRXeb/jCxvmDO7K+u49PvP6O7mD+o94Xza3tET2t8WJC16RlUJSyXVrXugGTKeFYpeBN8Ybe5kLGj34e6ItOQn26S/mKp3q7hqc/VtIz60a5MQeg5QAhD7Eo/Sne1V+Hvb8kkmUg/4GRAodXevY+StJqY1bNaqU+Vpu1JkCVw3YRwoxSzco8FapBrMZkkcZ4cmAutKfvY0N2XR0BJirU04eGRgGFvO6jruxBdBdFNoJF9KTetKyxfn7q4HlDZuZ9lBm1TRBcELbVLEDd/JqRPvk5f
  tomfilepp:
    uid: 3516
    # SSH keys for Tom added manually since the account module doesn't support multiple keys.
    groups:
      - users
      - db-snapshots
  waferbaby:
    uid: 3520
    ssh_key_type: ssh-rsa
    groups:
      - users
    ssh_key: AAAAB3NzaC1yc2EAAAADAQABAAABAQClD1oGLQYJ1bOq1PIys1iRhBIGA0UVLwYxNjhWY+1t0k4FFf0FEpVPW4neLauBsRbHvEsB+v4A7ZrcogMBXznLc8ddBhqO3j0aOn+5T7jJzp+ThPxNIn3jAB8OTMSQBqtPDIfdA7MzBkdeTlWjX2ZvkoTCSprdZVHamfdfKu9ckea10LCXRifaFRb82q8Oh+SXQYUDvsBPwO7n/5+3VrqqLIVBjMfjnFoR72SewEmTQ2qil0aSWBq/tUyDD1AwG535bn1+qBC0VEnny1XsdyordE+0ozFAlkp43f2HHq8nv9kfmwxzzVaAAFquc4id9SgxIXB6yPk64nPfj93Hx501
