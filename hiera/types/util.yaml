# Configuration for "util" host type

##############################################
## Class definitions.
classes:
  #- apache
  - site_profile::jenkins
  #- site_profile::puppetmaster
  - munin
  #- munin::server

##############################################
## Firewall configuration.
site_profile::puppetmaster::firewall_rules:
  '110 allow puppet agent from prod-db1':
    port: 8140
    source: prod-db1.cashmusic.org
  '110 allow puppet agent from prod-web1':
    port: 8140
    source: prod-web1.cashmusic.org
  '110 allow puppet agent from prod-web2':
    port: 8140
    source: prod-web2.cashmusic.org
  '110 allow puppet agent from prod-web5':
    port: 8140
    source: prod-web5.cashmusic.org
  '110 allow puppet agent from prod-web6':
    port: 8140
    source: prod-web6.cashmusic.org
  '110 allow puppet agent from prod-web7':
    port: 8140
    source: prod-web7.cashmusic.org
  '110 allow puppet agent from prod-web8':
    port: 8140
    source: prod-web8.cashmusic.org
  '110 allow puppet agent from dev-multi1':
    port: 8140
    source: dev-multi1.cashmusic.org
  '110 allow puppet agent from stage-multi1':
    port: 8140
    source: stage-multi1.cashmusic.org

site_profile::jenkins::firewall_rules:
  '140 allow github hooks':
    port: 8080
    source: 192.30.252.0/22

##############################################
## Jenkins configuration.
site_profile::jenkins::configure_firewall: false
